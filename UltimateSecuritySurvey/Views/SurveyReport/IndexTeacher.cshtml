@model IEnumerable<UltimateSecuritySurvey.Models.CustomerAnswer>

@{
    ViewBag.Title = "Index";
    ViewBag.PageHeader = ViewBag.SurveyTitle;
    int questionNumber = 1;
}

<div class="section-container accordion" data-section="accordion">
    @foreach(var item in Model)
    {
        <section>
            <p class="title" data-section-title>
                @Ajax.ActionLink(String.Format("{0} - {1} \n\n Answer Status: {2} | Observer Status: {3}",
                                                        questionNumber++, item.Question.questionTextMain,
                                                        item.answerStatusValue, item.observerStatusValue),
                            "Validate",
                            new { id = item.surveyId, number = item.questionId },
                            new AjaxOptions{})
            </p>
            <div class="content" data-section-content id="@item.questionId">
            </div>
        </section>
    } 
</div>

@section Sidebar{
    <div class="panel scrollable-medium">
        <h5>Status</h5>

        <table>
            <tr>
                <td>Answered questions</td>
                <th>@ViewBag.QuestionsAnswered / @ViewBag.QuestionsAmount</th>
            </tr>
            <tr>
                <td>Average observer status</td>
                <th>@ViewBag.AverageObserverStatus</th>
            </tr>
        </table>

        <h6>Survey progress</h6>
        <div class="progress large-12 success round">
            <span class="meter" style="width: @ViewBag.SurveyProgress"></span>
        </div>
    </div>
    
}

@section scripts{
    @Scripts.Render("~/Scripts/jsF/fSectionMod.js")
}
